(function(e){function l(a,b,c){var j=e.map(g,function(b){return i[b]}).join(c.b)||i[b.which],f=b.type,d;d=c[f][j];c.a||b.stopPropagation();typeof d==="function"&&d.call(a,b);if(a.is("document")){a=h[f][j];b=0;for(c=a.length;b<c;b+=1)a[b].trigger(f+":"+j)}}var k={bubble:!0,delimiter:"_",keyup:{},keydown:{}},i={},g=[],h={e:{},f:{}};e.fn.extend({keyboardListener:function(a){var b=this,c=e.extend(!0,{},k,b.data("keyboardListener:configuration"),a);b.data("keyboardListener:configuration",c);b.c=function(){b.unbind(".keyboardListener");
return b};b.d=function(a,f){delete c[a][f];b.data("keyboardListener:configuration",c);return b};return b.bind({"keydown.keyboardListener":function(a){var f=a.which,d;a:{var e;d=0;for(e=g.length;d<e;d+=1)if(g[d]===f){d=!0;break a}d=!1}d||g.push(f);l(b,a,c)},"keyup.keyboardListener":function(a){var f=a.which,d;l(b,a,c);a=0;for(d=g.length;a<d;a+=1)if(g[a]===f){g.splice(a,1);break}}})}});e.extend({keyboardListener:{getConfiguration:function(a){return a&&a.data?a.data("keyboardListener:configuration"):
k},defaults:function(a){return e.extend(!0,k,a)},keyMap:function(a){return e.extend(i,a)},subscribe:function(a,b,c){h[a][b]=(h[a][b]||[]).concat([c])},unsubscribe:function(a,b,c){var a=h[a][b],e,b=0;for(e=a.length;b<e;b+=1)if(a[b]===c){a.splice(b,1);break}}}})})(jQuery);